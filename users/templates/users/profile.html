{% extends "Layout.html" %}
{% load crispy_forms_tags %}

{% block title %}我的资料{% endblock %}

{% block content %}
<div class="container py-4" style="max-width: 720px;">
    <h2 class="mb-4 text-center">个人资料设置</h2>
    <button type="button" class="btn btn-outline-primary btn-sm mb-3" onclick="window.history.back();">
        返回
    </button>

    <!-- 修改资料 -->
    <div class="card mb-4">
        <div class="card-header">修改资料</div>
        <div class="card-body">
            <form method="post">
                {% csrf_token %}
                <input type="hidden" name="next" value="{{ request.META.HTTP_REFERER }}">
                {{ user_form|crispy }}
                <button type="submit" name="update_profile" class="btn btn-primary">保存资料</button>
            </form>
        </div>
    </div>

    <!-- 修改密码 -->
    <div class="card">
        <div class="card-header">修改密码</div>
        <div class="card-body">
            <form method="post">
                {% csrf_token %}
                <input type="hidden" name="next" value="{{ request.META.HTTP_REFERER }}">
                {{ pwd_form|crispy }}
                <button type="submit" name="change_password" class="btn btn-warning">修改密码</button>
            </form>
        </div>
    </div>
</div>
{% endblock %}
