{% load custom_tags %}
<div class="table-responsive">
    <table class="table table-hover">
<thead class="table-light">
    <tr>
        <th>排名</th>
        <th>姓名 / 匹配度</th>
        <th>性别</th>
        <th>年龄</th>
        <th>学历</th>
        <th>工作年限</th>
        <th>所在城市</th>
        <th>当前公司 / 职位</th>
        <th>操作</th>
    </tr>
</thead>
<tbody>
    {% for resume in page_obj %}
    <tr>
        <td>
            <span class="badge bg-primary">
                {% with offset=page_obj.number|add:"-1"|mul:page_obj.paginator.per_page %}
                    {{ offset|add:forloop.counter }}
                {% endwith %}
            </span>
        </td>

        <td style="min-width: 160px;">
            <div><strong>{{ resume.name }}</strong></div>
            <div class="d-flex align-items-center mt-1">
                <div class="progress me-2" style="width: 100px; height: 8px;">
                    <div class="progress-bar bg-success" style="width: {{ resume.match_score_percent|floatformat:0 }}%"></div>
                </div>
                <span class="fw-bold">{{ resume.match_score|floatformat:1 }} / 10</span>
            </div>
        </td>

        <td>{{ resume.gender }}</td>
        <td>{{ resume.age }}</td>
        <td>{{ resume.education_level }}</td>
        <td>{{ resume.work_years }}</td>
        <td>{{ resume.city }}</td>

        <td>
            {% if resume.current_company %}
            <div class="mb-1">
                <span class="badge bg-secondary">{{ resume.current_company }}</span>
            </div>
            {% endif %}
            {% if resume.current_position %}
            <div>
                <span class="badge bg-light text-dark border">{{ resume.current_position }}</span>
            </div>
            {% endif %}
        </td>

        <td>
            <div class="btn-group btn-group-sm">
                <a href="https://h.liepin.com/resume/showresumedetail/?showsearchfeedback=1&res_id_encode={{ resume.resume_id }}" class="btn btn-outline-primary">
                    <i class="bi bi-eye me-1"></i>查看简历
                </a>
                <a href="#" class="btn btn-outline-success">
                    <i class="bi bi-telephone me-1"></i>联系候选人
                </a>
            </div>
        </td>
    </tr>
    {% endfor %}
</tbody>

    </table>
</div>

{% include "components/Pager.html" %}
